<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>My Hakyll Blog - Adventures in Open Source: Compiling R on Mavericks</title>
        <link rel="stylesheet" type="text/css" href="../css/default.css" />
    </head>
    <body>
        <div id="header">
            <div id="logo">
                <a href="../">My Hakyll Blog</a>
            </div>
            <div id="navigation">
                <a href="../">Home</a>
                <a href="../about.html">About</a>
                <a href="../contact.html">Contact</a>
                <a href="../archive.html">Archive</a>
            </div>
        </div>

        <div id="content">
            <h1>Adventures in Open Source: Compiling R on Mavericks</h1>

            <div class="info">
    Posted on November  9, 2013
    
</div>

<p>These are the things that happen when I get bored. For a time I’ve had a checkout of R’s source code sitting around, simply because such a thing is nifty to have. A lazy, slightly hungover Saturday morning though prompted me to try and compile it, just for shits-and-giggles. Also, to see if I could.</p>
<p>Initially, I had checked out the code from the the mirror maintained by <a href="http://www.github.com/wch">wch</a>. However, it transpired that part of the make script checks if R is being built from an svn checkout, and fails otherwise. So, it’s best to start with and svn checkout, available at svn.r-project.com/R/. Thus run:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">svn</span> checkout http://svn.r-project.org/R/trunk your_dir</code></pre></div>
<p>To checkout the latest code to <em>your_dir</em>. To get a specific version, e.g. R-3.0.2, run:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">svn</span> checkout http://svn.r-project.org/R/tags/R-3-0-2 your_dir</code></pre></div>
<p>Move on gathering the dependencies. Fortunately I had gcc and gfortan installed from previous projects. Insure that gcc is up to date by installing the latest Xcode and updating the command line utilities. Note that in the Mavericks version of Xcode, the command line tools don’t appear to be in their usual place on the Preferences &gt; Downloads tab. I forced the install with :</p>
<pre><code>$ xcode-select --install</code></pre>
<p>which started the update, and prompted an command line tools up to appear in the App Store. I’m not sure precisely what happened. Gfotran is available from the <a href="http://cran.r-project.org/bin/macosx/tools/">tools</a> page on CRAN. Regardless once</p>
<pre><code>$ gcc --version
$ gfortran --version</code></pre>
<p>display versions &gt;= 4.6.2 it’s good to go.</p>
<p>R requires tcl/tk on all platforms; it should have come packaged with OSX 10.9. If errors appear in the compilation steps, packaged Tcl/tk installs are available on the same <a href="http://cran.r-project.org/bin/macosx/tools/">tools</a> page.</p>
<p>R also requires a functioning X11 window system; the one included with OSX isn’t always friendly, so it is necessary to download a replacement. The natural choice is <a href="http://xquartz.macosforge.org/landing/">Xquartz</a>. The installer recommends restarting or logging out and back in - this step is necessary if Xquartz has not been installed before!</p>
<p>With the external dependencies installed, navigate to <em>your_dir/trunk</em> where we checked out the source code above. From there, first run</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">./tools/rsync-recommended</span></code></pre></div>
<p>to pull in the source tarballs for the recommended packages.</p>
<p>Finally,</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">./configure</span> <span class="kw">&amp;&amp;</span> <span class="kw">make</span></code></pre></div>
<p>should build and make R with the source directory.</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">make</span> check</code></pre></div>
<p>should check that everything has worked as expected.</p>
<p>Simple as that.</p>
<p>If you want to install system wide as a framework, run:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="co"># build the docs first</span>
$ <span class="kw">make</span> info
$ <span class="kw">make</span> pdf

$ <span class="kw">make</span> install
$ <span class="kw">make</span> install-info
$ <span class="kw">make</span> install-pdf</code></pre></div>
<p>though I wouldn’t recommend installing at the system level unless you’ve built one of the stable versions.</p>
<p>Note: most of this comes from the INSTALL readme included with the source. However I felt like documenting the experience so it’s here now too.</p>

        </div>
        <div id="footer">
            Site proudly generated by
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>
        </div>
    </body>
</html>
